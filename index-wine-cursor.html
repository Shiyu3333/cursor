<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <title>ËñõÂÆöË∞îÁöÑÁå´üê±</title>
    <style>
        body {
            background: #1a1a1a;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50,20 L60,40 L80,45 L65,60 L70,80 L50,70 L30,80 L35,60 L20,45 L40,40 Z" fill="white" opacity="0.3"/><path d="M50,30 L55,40 L65,43 L55,50 L58,60 L50,55 L42,60 L45,50 L35,43 L45,40 Z" fill="white" opacity="0.3"/></svg>');
            background-size: 200px;
            background-repeat: repeat;
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
        }

        .title {
            font-size: 3.5rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 1.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: -0.5px;
            position: relative;
        }

        .title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #b3b3b3;
            margin-bottom: 3rem;
            text-align: center;
            font-weight: 500;
        }

        .assistant-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2.5rem;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .assistant-card {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 2.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .assistant-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
            border-radius: 4px 4px 0 0;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .assistant-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 107, 107, 0.3);
        }

        .assistant-card:hover::before {
            opacity: 1;
        }

        .assistant-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            color: #ff6b6b;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .assistant-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #ffffff;
            letter-spacing: -0.5px;
        }

        .assistant-description {
            color: #b3b3b3;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            font-size: 1.1rem;
            font-weight: 400;
        }

        .chat-container {
            display: none;
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 2rem;
            position: relative;
            overflow: hidden;
        }

        .chat-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
            border-radius: 4px 4px 0 0;
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 2rem;
            background-color: transparent;
            border-radius: 24px;
            margin-top: 4rem;
        }

        .message {
            margin-bottom: 1.5rem;
            padding: 1.2rem 1.5rem;
            border-radius: 20px;
            max-width: 80%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            position: relative;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .message.user {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .message.bot {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }

        .chat-input {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            padding: 0 2rem 2rem;
        }

        .chat-input input {
            flex: 1;
            padding: 1rem 1.5rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .chat-input input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2);
            border-color: rgba(255, 107, 107, 0.3);
        }

        .chat-input button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            padding: 1rem 1.8rem;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .chat-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(255, 107, 107, 0.3);
        }

        .back-button {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(255, 107, 107, 0.3);
        }

        .blind-box-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .blind-box-container.show {
            visibility: visible;
            opacity: 1;
        }

        .blind-box {
            width: 20vw;
            min-width: 200px;
            aspect-ratio: 1;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transform: scale(0);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .blind-box.show {
            transform: scale(1);
        }

        .blind-box:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .blind-box-content {
            text-align: center;
            color: white;
        }

        .blind-box-content i {
            font-size: 3rem;
            margin-bottom: 1rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .blind-box-content p {
            font-size: 1.2rem;
            font-weight: 500;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .menu-container {
            display: none;
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .drink-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .drink-card {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .drink-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 107, 107, 0.3);
        }

        .drink-image-container {
            position: relative;
            width: 100%;
            height: 250px;
            overflow: hidden;
            border-radius: 12px 12px 0 0;
        }

        .drink-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .drink-image:hover {
            transform: scale(1.1);
        }

        .drink-content {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex: 1;
            justify-content: space-between;
        }

        .drink-info {
            flex: 1;
        }

        .drink-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
            line-height: 1.2;
            height: 3.6rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .drink-price {
            font-size: 1.2rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
        }

        .drink-description {
            color: #b3b3b3;
            margin-bottom: 1rem;
            line-height: 1.6;
            height: 4.8rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .drink-fortune {
            color: #ff8e8e;
            font-style: italic;
            margin-bottom: 1rem;
            padding: 0.8rem;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 12px;
            height: 4rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .button-container {
            margin-top: auto;
        }

        .add-to-order {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            width: 100%;
        }

        .add-to-order:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(255, 107, 107, 0.3);
        }

        .order-container {
            display: none;
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .order-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .item-price {
            color: #ff6b6b;
            font-size: 1.1rem;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .quantity-button {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-button:hover {
            background: rgba(255, 107, 107, 0.3);
        }

        .quantity {
            color: #ffffff;
            font-size: 1.2rem;
            min-width: 30px;
            text-align: center;
        }

        .total-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            color: #ffffff;
            font-size: 1.2rem;
        }

        .total-amount {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ff6b6b;
        }

        .table-number {
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .table-number input {
            width: 100%;
            padding: 0.8rem;
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 1.1rem;
        }

        .table-number input:focus {
            outline: none;
        }

        .submit-order {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 30px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            font-weight: 500;
            width: 100%;
            margin-top: 2rem;
        }

        .submit-order:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(255, 107, 107, 0.3);
        }

        .nav-buttons {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            gap: 1rem;
        }

        .nav-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 30px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .nav-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(255, 107, 107, 0.3);
        }
    </style>
</head>

<body>
    <div class="container mx-auto px-4 py-8">
        <h1 class="title text-center">ËñõÂÆöË∞îÁöÑÁå´üê±</h1>
        <p class="subtitle">ÈÄâÊã©‰∏Ä‰ΩçÊô∫ËÉΩÂä©ÊâãÔºåÂºÄÂêØÊÇ®ÁöÑÈÖíÊ∞¥‰πãÊóÖ</p>
        
        <div class="assistant-grid" id="assistant-grid">
            <div class="assistant-card" data-assistant="mixologist">
                <i class="fas fa-cocktail assistant-icon"></i>
                <h3 class="assistant-name">Ë∞ÉÈÖíÂ∏à</h3>
                <p class="assistant-description">‰∏ì‰∏öË∞ÉÈÖíÂ∏àÔºåÁ≤æÈÄöÂêÑÁ±ªÈ∏°Â∞æÈÖíË∞ÉÂà∂ÔºåËÉΩ‰∏∫ÊÇ®Êé®ËçêÊúÄÈÄÇÂêàÁöÑÈ•ÆÂìÅÊê≠ÈÖç</p>
            </div>
            
            <div class="assistant-card" data-assistant="sommelier">
                <i class="fas fa-wine-glass-alt assistant-icon"></i>
                <h3 class="assistant-name">ÂìÅÈÖíÂ∏à</h3>
                <p class="assistant-description">ËµÑÊ∑±ÂìÅÈÖíÂ∏àÔºåÁÜüÊÇâÂêÑÁ±ªËë°ËêÑÈÖíÔºåËÉΩ‰∏∫ÊÇ®Êèê‰æõ‰∏ì‰∏öÁöÑÂìÅÈâ¥Âª∫ËÆÆ</p>
            </div>
            
            <div class="assistant-card" data-assistant="bartender">
                <i class="fas fa-beer assistant-icon"></i>
                <h3 class="assistant-name">ÈÖí‰øù</h3>
                <p class="assistant-description">ÁªèÈ™å‰∏∞ÂØåÁöÑÈÖí‰øùÔºå‰∫ÜËß£ÂêÑÁ±ªÂï§ÈÖíÂíåÁÉàÈÖíÔºåËÉΩ‰∏∫ÊÇ®Êé®ËçêÊúÄÂèóÊ¨¢ËøéÁöÑÈ•ÆÂìÅ</p>
            </div>
            
            <div class="assistant-card" data-assistant="tea-master">
                <i class="fas fa-mug-hot assistant-icon"></i>
                <h3 class="assistant-name">Ëå∂Ëâ∫Â∏à</h3>
                <p class="assistant-description">Ëå∂Ëâ∫Â§ßÂ∏àÔºåÁ≤æÈÄöÂêÑÁ±ªËå∂È•ÆÔºåËÉΩ‰∏∫ÊÇ®Êé®ËçêÊúÄÈÄÇÂêàÁöÑËå∂È•ÆÊê≠ÈÖç</p>
            </div>
        </div>

        <div id="chat-container" class="chat-container">
            <button class="back-button" id="back-button">
                <i class="fas fa-arrow-left"></i> ËøîÂõû
            </button>
            <div class="chat-messages" id="chat-messages"></div>
            <div class="chat-input">
                <input type="text" id="user-input" placeholder="ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢ò...">
                <button id="send-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <div id="menu-container" class="menu-container">
            <div class="drink-grid" id="drink-grid">
                <!-- È•ÆÂìÅÂç°ÁâáÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>

        <div id="order-container" class="order-container">
            <div id="order-items">
                <!-- ËÆ¢ÂçïÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>

            <div class="total-section">
                <div class="total-row">
                    <span>Â∞èËÆ°</span>
                    <span id="subtotal">¬•0</span>
                </div>
                <div class="total-row">
                    <span>ÊúçÂä°Ë¥π</span>
                    <span>¬•0</span>
                </div>
                <div class="total-row total-amount">
                    <span>ÊÄªËÆ°</span>
                    <span id="total">¬•0</span>
                </div>
            </div>

            <div class="table-number">
                <input type="text" id="table-number" placeholder="ËØ∑ËæìÂÖ•Ê°åÂè∑">
            </div>

            <button class="submit-order" onclick="submitOrder()">
                Êèê‰∫§ËÆ¢Âçï
            </button>
        </div>
    </div>

    <div class="nav-buttons">
        <button class="nav-button" id="menu-button" style="display: none;">
            <i class="fas fa-utensils"></i>
            Êü•ÁúãËèúÂçï
        </button>
        <button class="nav-button" id="order-button" style="display: none;">
            <i class="fas fa-shopping-cart"></i>
            Êü•ÁúãËÆ¢Âçï
        </button>
    </div>

    <div id="blind-box-container" class="blind-box-container">
        <div id="blind-box" class="blind-box">
            <div class="blind-box-content">
                <i class="fas fa-gift"></i>
                <p>ÁÇπÂáªÂºÄÂêØÊÉäÂñú</p>
            </div>
        </div>
    </div>

    <script>
        // Âä©ÊâãÊï∞ÊçÆ
        const assistants = [
            {
                name: "Ë∞ÉÈÖíÂ∏à",
                icon: "fa-cocktail",
                description: "‰∏ì‰∏öË∞ÉÈÖíÂ∏àÔºåÁ≤æÈÄöÂêÑÁ±ªÈ∏°Â∞æÈÖíË∞ÉÂà∂ÔºåËÉΩ‰∏∫ÊÇ®Êé®ËçêÊúÄÈÄÇÂêàÁöÑÈ•ÆÂìÅÊê≠ÈÖç"
            },
            {
                name: "ÂìÅÈÖíÂ∏à",
                icon: "fa-wine-glass-alt",
                description: "ËµÑÊ∑±ÂìÅÈÖíÂ∏àÔºåÁÜüÊÇâÂêÑÁ±ªËë°ËêÑÈÖíÔºåËÉΩ‰∏∫ÊÇ®Êèê‰æõ‰∏ì‰∏öÁöÑÂìÅÈâ¥Âª∫ËÆÆ"
            },
            {
                name: "ÈÖí‰øù",
                icon: "fa-beer",
                description: "ÁªèÈ™å‰∏∞ÂØåÁöÑÈÖí‰øùÔºå‰∫ÜËß£ÂêÑÁ±ªÂï§ÈÖíÂíåÁÉàÈÖíÔºåËÉΩ‰∏∫ÊÇ®Êé®ËçêÊúÄÂèóÊ¨¢ËøéÁöÑÈ•ÆÂìÅ"
            },
            {
                name: "Ëå∂Ëâ∫Â∏à",
                icon: "fa-mug-hot",
                description: "Ëå∂Ëâ∫Â§ßÂ∏àÔºåÁ≤æÈÄöÂêÑÁ±ªËå∂È•ÆÔºåËÉΩ‰∏∫ÊÇ®Êé®ËçêÊúÄÈÄÇÂêàÁöÑËå∂È•ÆÊê≠ÈÖç"
            }
        ];

        // ÂõæÁâáÊêúÁ¥¢APIÈÖçÁΩÆ
        const imageAPIs = {
            'Ë∞ÉÈÖíÂ∏à': {
                'Ê¢¶ÂπªÊòüÁ©∫ÁâπË∞É': 'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b',
                'ÊÅãÊÅãÊ∞îÊ≥°': 'https://images.unsplash.com/photo-1536935338788-846bb9981813',
                'È≠îÊ≥ïÂΩ©ËôπÁâπË∞É': 'https://images.unsplash.com/photo-1486947799489-3fabdd7d32a6',
                'ÈªòËÆ§': 'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b'
            },
            'ÂìÅÈÖíÂ∏à': {
                'ÈôàÂπ¥Ê≥¢Â∞îÂ§ö': 'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3',
                'ÊôÆÁΩóÊó∫ÊñØÊ°ÉÁ∫¢': 'https://images.unsplash.com/photo-1553361371-9b22f78e8b1d',
                'ÊÑèÂ§ßÂà©Ëµ∑Ê≥°ÈÖí': 'https://images.unsplash.com/photo-1558001373-7b93ee48ffa0',
                'ÈªòËÆ§': 'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3'
            },
            'ÈÖí‰øù': {
                'ÈôàÂπ¥Â®ÅÂ£´Âøå': 'https://images.unsplash.com/photo-1527281400683-1aae777175f8',
                'Á≤æÈÖøÂï§ÈÖí': 'https://images.unsplash.com/photo-1608270586620-248524c67de9',
                'ÊûúÈ¶ôÂï§ÈÖí': 'https://images.unsplash.com/photo-1618183479302-1e0aa382c36b',
                'ÈªòËÆ§': 'https://images.unsplash.com/photo-1527281400683-1aae777175f8'
            },
            'Ëå∂Ëâ∫Â∏à': {
                'Â§ßÁ∫¢Ë¢ç': 'https://images.unsplash.com/photo-1576092768241-dec231879fc3',
                'ÊòéÂâçÈæô‰∫ï': 'https://images.unsplash.com/photo-1582793988951-9aed5509eb97',
                'Ê≠¶Â§∑Á∫¢Ëå∂': 'https://images.unsplash.com/photo-1544787219-7f47ccb76574',
                'ÈªòËÆ§': 'https://images.unsplash.com/photo-1576092768241-dec231879fc3'
            }
        };

        // È•ÆÂìÅÂ∫ìÂ≠òÊï∞ÊçÆ
        const drinkInventory = {
            'Ë∞ÉÈÖíÂ∏à': [
                {
                    name: "Ê¢¶ÂπªÊòüÁ©∫ÁâπË∞É",
                    price: 88,
                    description: "ÂàõÊñ∞Ë∞ÉÂà∂ÁöÑÊ¢¶ÂπªÈ∏°Â∞æÈÖíÔºåÊê≠ÈÖçÁâπÂà∂Ë£ÖÈ•∞ÔºåÂëàÁé∞Áã¨ÁâπËßÜËßâÊïàÊûú„ÄÇ",
                    keywords: ["Ê¢¶Âπª", "ÁâπË∞É", "È∏°Â∞æÈÖí"],
                    fortune: "ÁπÅÊòüÁÇπÁÇπÔºåÊØè‰∏ÄÂè£ÈÉΩÊòØ‰∏ÄÂú∫ÊµÅÊòüÈõ®ÁöÑÈÇÇÈÄÖ„ÄÇ",
                    image: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b"
                },
                {
                    name: "ÊÅãÊÅãÊ∞îÊ≥°",
                    price: 78,
                    description: "Ê∏ÖÊñ∞ÊûúÈ¶ô‰∏éÊ∞îÊ≥°ÁöÑÈÇÇÈÄÖÔºåÊê≠ÈÖçÁ≤æËá¥Ë£ÖÈ•∞ÔºåÂ∞ëÂ•≥ÂøÉÊª°Êª°„ÄÇ",
                    keywords: ["Ê∏ÖÊñ∞", "ÊûúÈ¶ô", "Ê∞îÊ≥°"],
                    fortune: "Á≤âÁ∫¢Ê≥°Ê≥°ÔºåËÆ©ÂøÉË∑≥Âä†ÈÄüÁöÑÂ∞èÁ°ÆÂπ∏„ÄÇ",
                    image: "https://images.unsplash.com/photo-1536935338788-846bb9981813"
                },
                {
                    name: "È≠îÊ≥ïÂΩ©ËôπÁâπË∞É",
                    price: 98,
                    description: "Â§öÂ±ÇÊ∏êÂèòÁöÑÊ¢¶ÂπªÈ∏°Â∞æÈÖíÔºåÊê≠ÈÖçÂàõÊÑèË£ÖÈ•∞ÔºåËßÜËßâ‰∏éÂë≥ËßâÁöÑÂèåÈáç‰∫´Âèó„ÄÇ",
                    keywords: ["È≠îÊ≥ï", "ÂΩ©Ëôπ", "ÁâπË∞É"],
                    fortune: "ÂΩ©ËôπËà¨Áªö‰∏ΩÁöÑÂøÉÊÉÖÔºåÂ∞ΩÂú®Ëøô‰∏ÄÊùØ‰∏≠„ÄÇ",
                    image: "https://images.unsplash.com/photo-1486947799489-3fabdd7d32a6"
                }
            ],
            'ÂìÅÈÖíÂ∏à': [
                {
                    name: "ÈôàÂπ¥Ê≥¢Â∞îÂ§ö",
                    price: 188,
                    description: "‰ºòÈõÖÈÜáÂéöÁöÑÁ∫¢ÈÖíÔºåËï¥Âê´ÈªëÈÜãÊ†ó‰∏éÊ©°Êú®Ê°∂ÁöÑËä≥È¶ô„ÄÇ",
                    keywords: ["Á∫¢ÈÖí", "Ê≥¢Â∞îÂ§ö", "ÈôàÂπ¥"],
                    fortune: "Êó∂ÂÖâÊ≤âÊ∑ÄÔºåÊàêÂ∞±ÂÆåÁæéÈ£éÈüµ„ÄÇ",
                    image: "https://images.unsplash.com/photo-1510812431401-41d2bd2722f3"
                },
                {
                    name: "ÊôÆÁΩóÊó∫ÊñØÊ°ÉÁ∫¢",
                    price: 158,
                    description: "Â¶ÇÂêåÊôÆÁΩóÊó∫ÊñØÁöÑÈò≥ÂÖâÔºåÊ∏ÖÊñ∞ÊÄ°‰∫∫ÁöÑÊ°ÉÁ∫¢Ëë°ËêÑÈÖí„ÄÇ",
                    keywords: ["Ê°ÉÁ∫¢", "Ê∏ÖÊñ∞", "Ëë°ËêÑÈÖí"],
                    fortune: "Á≤âËâ≤ÁöÑÊµ™Êº´ÔºåÂçóÊ≥ïÁöÑÂæÆÈÜ∫„ÄÇ",
                    image: "https://images.unsplash.com/photo-1553361371-9b22f78e8b1d"
                },
                {
                    name: "ÊÑèÂ§ßÂà©Ëµ∑Ê≥°ÈÖí",
                    price: 128,
                    description: "Êù•Ëá™ÊÑèÂ§ßÂà©ÁöÑÊ∏ÖÊñ∞Ëµ∑Ê≥°ÈÖíÔºåÂ∏¶ÊúâÊ∞¥Êûú‰∏éËä±È¶ô„ÄÇ",
                    keywords: ["Ëµ∑Ê≥°ÈÖí", "ÊûúÈ¶ô", "Ê∏ÖÊñ∞"],
                    fortune: "Ê∞îÊ≥°‰∏≠ÊµÅÊ∑åÁöÑÊ¨¢ÊÑâÊó∂ÂÖâ„ÄÇ",
                    image: "https://images.unsplash.com/photo-1558001373-7b93ee48ffa0"
                }
            ],
            'ÈÖí‰øù': [
                {
                    name: "ÈôàÂπ¥Â®ÅÂ£´Âøå",
                    price: 168,
                    description: "ÈÜáÂéöÊµìÈÉÅÁöÑÂ®ÅÂ£´ÂøåÔºåÊê≠ÈÖçÂÜ∞ÂùóÊàñËãèÊâìÊ∞¥„ÄÇ",
                    keywords: ["Â®ÅÂ£´Âøå", "ÈÜáÂéö", "ÈôàÂπ¥"],
                    fortune: "ÂìÅ‰∏ÄÂè£Â®ÅÂ£´ÂøåÔºåÊÑüÂèóÊó∂ÂÖâÊµÅËΩ¨„ÄÇ",
                    image: "https://images.unsplash.com/photo-1527281400683-1aae777175f8"
                },
                {
                    name: "Á≤æÈÖøÂï§ÈÖí",
                    price: 68,
                    description: "ÁâπÈÄâÁ≤æÈÖøÂï§ÈÖíÔºåÂè£ÊÑüÊ∏ÖÁàΩÔºåÂõûÂë≥ÊÇ†Èïø„ÄÇ",
                    keywords: ["Âï§ÈÖí", "Á≤æÈÖø", "Ê∏ÖÁàΩ"],
                    fortune: "ÁïÖÈ•ÆÁ≤æÈÖøÔºå‰∫´ÂèóÁîüÊ¥ª„ÄÇ",
                    image: "https://images.unsplash.com/photo-1608270586620-248524c67de9"
                },
                {
                    name: "ÊûúÈ¶ôÂï§ÈÖí",
                    price: 58,
                    description: "Ê∏ÖÊñ∞Ê∞¥ÊûúÂï§ÈÖíÔºåÊê≠ÈÖçËä±ÁîüÂ∞èÈ£ü„ÄÇ",
                    keywords: ["Âï§ÈÖí", "ÊûúÈ¶ô", "Ê∏ÖÊñ∞"],
                    fortune: "ËΩªÊùæÊÉ¨ÊÑèÔºåÂø´‰πêÁïÖÈ•Æ„ÄÇ",
                    image: "https://images.unsplash.com/photo-1618183479302-1e0aa382c36b"
                }
            ],
            'Ëå∂Ëâ∫Â∏à': [
                {
                    name: "Ê≠¶Â§∑Â§ßÁ∫¢Ë¢ç",
                    price: 158,
                    description: "Â≤©ÈüµÊµìÈÉÅÁöÑ‰πåÈæôËå∂ÔºåÈ¶ôÊ∞îÈÜáÂéö„ÄÇ",
                    keywords: ["‰πåÈæôËå∂", "Â≤©Ëå∂", "ÈÜáÂéö"],
                    fortune: "Â≤©Â£ÅÊ≤âÊ∑ÄÔºåÁôæÂπ¥Ëå∂Èüµ„ÄÇ",
                    image: "https://images.unsplash.com/photo-1576092768241-dec231879fc3"
                },
                {
                    name: "ÊòéÂâçÈæô‰∫ï",
                    price: 138,
                    description: "Ê∏ÖÊñ∞ÈõÖËá¥ÁöÑÁªøËå∂ÔºåÂ∏¶ÊúâÊò•Â§©ÁöÑÊ∞îÊÅØ„ÄÇ",
                    keywords: ["ÁªøËå∂", "Ê∏ÖÊñ∞", "ÊòéÂâç"],
                    fortune: "‰∏ÄÂè£Êò•Ëå∂ÔºåÂìÅÂë≥Êó∂ËäÇ„ÄÇ",
                    image: "https://images.unsplash.com/photo-1582793988951-9aed5509eb97"
                },
                {
                    name: "Ê≠¶Â§∑Á∫¢Ëå∂",
                    price: 128,
                    description: "Á∫¢Ëå∂‰∏≠ÁöÑÊûÅÂìÅÔºåÈ¶ôÊ∞îÈ´òÊâ¨„ÄÇ",
                    keywords: ["Á∫¢Ëå∂", "È¶ôÊ∞î", "ÊûÅÂìÅ"],
                    fortune: "Ëå∂È¶ôÂõõÊ∫¢ÔºåÈüµÂë≥ÊÇ†Èïø„ÄÇ",
                    image: "https://images.unsplash.com/photo-1544787219-7f47ccb76574"
                }
            ]
        };

        // Ê†πÊçÆÂØπËØùÂÖ≥ÈîÆËØçÂåπÈÖçÈ•ÆÂìÅ
        function matchDrinksWithKeywords(messages) {
            const extractedKeywords = messages
                .map(msg => msg.textContent.toLowerCase())
                .join(' ');
            
            const drinks = drinkInventory[currentAssistant];
            const matchedDrinks = drinks
                .map(drink => ({
                    drink,
                    score: calculateMatchScore(drink, extractedKeywords)
                }))
                .sort((a, b) => b.score - a.score)
                .slice(0, 3)
                .map(item => item.drink);

            return matchedDrinks;
        }

        // ËÆ°ÁÆóÂåπÈÖçÂàÜÊï∞
        function calculateMatchScore(drink, text) {
            let score = 0;
            drink.keywords.forEach(keyword => {
                if (text.includes(keyword.toLowerCase())) {
                    score += 1;
                }
            });
            return score;
        }

        // ÊòæÁ§∫È•ÆÂìÅÂàóË°®
        function displayDrinks() {
            const drinkGrid = document.getElementById('drink-grid');
            drinkGrid.innerHTML = '';

            // Ëé∑ÂèñÂΩìÂâçËßíËâ≤ÁöÑÈªòËÆ§‰∏âÊ¨æÈ•ÆÂìÅ
            const defaultDrinks = drinkInventory[currentAssistant];

            // ÊòæÁ§∫È•ÆÂìÅÂç°Áâá
            defaultDrinks.forEach(drink => {
                const drinkCard = document.createElement('div');
                drinkCard.className = 'drink-card';
                drinkCard.innerHTML = `
                    <div class="drink-image-container">
                        <img src="${drink.image}" alt="${drink.name}" class="drink-image" 
                             onerror="this.src='${imageAPIs[currentAssistant]['ÈªòËÆ§']}'">
                    </div>
                    <div class="drink-content">
                        <div class="drink-info">
                            <h3 class="drink-name">${drink.name}</h3>
                            <p class="drink-price">¬•${drink.price}</p>
                            <p class="drink-description">${drink.description}</p>
                            <p class="drink-fortune">${drink.fortune}</p>
                        </div>
                        <div class="button-container">
                            <button class="add-to-order" onclick="addToOrder('${drink.name}', ${drink.price})">
                                Âä†ÂÖ•ËÆ¢Âçï
                            </button>
                        </div>
                    </div>
                `;
                drinkGrid.appendChild(drinkCard);
            });
        }

        // Ê∑ªÂä†Âà∞ËÆ¢Âçï
        function addToOrder(name, price) {
            let order = JSON.parse(localStorage.getItem('order') || '[]');
            const existingItem = order.find(item => item.name === name);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                order.push({
                    name: name,
                    price: price,
                    quantity: 1
                });
            }
            
            localStorage.setItem('order', JSON.stringify(order));
            alert(`${name} Â∑≤Ê∑ªÂä†Âà∞ËÆ¢ÂçïÔºÅ`);
        }

        // ÊòæÁ§∫ËÆ¢Âçï
        function displayOrder() {
            const order = JSON.parse(localStorage.getItem('order') || '[]');
            const orderItems = document.getElementById('order-items');
            orderItems.innerHTML = '';

            let subtotal = 0;

            order.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;

                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-price">¬•${item.price}</div>
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-button" onclick="updateQuantity('${item.name}', ${item.quantity - 1})">-</button>
                        <span class="quantity">${item.quantity}</span>
                        <button class="quantity-button" onclick="updateQuantity('${item.name}', ${item.quantity + 1})">+</button>
                    </div>
                `;
                orderItems.appendChild(orderItem);
            });

            document.getElementById('subtotal').textContent = `¬•${subtotal}`;
            document.getElementById('total').textContent = `¬•${subtotal}`;
        }

        // Êõ¥Êñ∞Êï∞Èáè
        function updateQuantity(name, newQuantity) {
            if (newQuantity < 0) return;

            const order = JSON.parse(localStorage.getItem('order') || '[]');
            const item = order.find(item => item.name === name);

            if (item) {
                if (newQuantity === 0) {
                    const index = order.indexOf(item);
                    order.splice(index, 1);
                } else {
                    item.quantity = newQuantity;
                }
            }

            localStorage.setItem('order', JSON.stringify(order));
            displayOrder();
        }

        // Êèê‰∫§ËÆ¢Âçï
        function submitOrder() {
            const tableNumber = document.getElementById('table-number').value.trim();
            if (!tableNumber) {
                alert('ËØ∑ËæìÂÖ•Ê°åÂè∑');
                return;
            }

            const order = JSON.parse(localStorage.getItem('order') || '[]');
            if (order.length === 0) {
                alert('ËÆ¢Âçï‰∏∫Á©∫');
                return;
            }

            const total = order.reduce((sum, item) => sum + item.price * item.quantity, 0);
            alert(`ËÆ¢ÂçïÂ∑≤Êèê‰∫§ÔºÅ\nÊ°åÂè∑Ôºö${tableNumber}\nÊÄª‰ª∑Ôºö¬•${total}`);

            // Ê∏ÖÁ©∫ËÆ¢Âçï
            localStorage.removeItem('order');
            
            // ËøîÂõûÈ¶ñÈ°µ
            document.getElementById('assistant-grid').style.display = 'grid';
            document.getElementById('chat-container').style.display = 'none';
            document.getElementById('menu-container').style.display = 'none';
            document.getElementById('order-container').style.display = 'none';
            document.getElementById('menu-button').style.display = 'none';
            document.getElementById('order-button').style.display = 'none';
        }

        // Áõ≤ÁõíÁÇπÂáª‰∫ã‰ª∂
        document.getElementById('blind-box').addEventListener('click', () => {
            showMenu();
            document.getElementById('blind-box-container').classList.remove('show');
            document.getElementById('blind-box').classList.remove('show');
        });

        // ÂàùÂßãÂåñÈ°µÈù¢
        document.addEventListener('DOMContentLoaded', () => {
            // ÊòæÁ§∫Âä©ÊâãÂç°Áâá
            const assistantGrid = document.getElementById('assistant-grid');
            assistantGrid.innerHTML = assistants.map(assistant => `
                <div class="assistant-card" data-assistant="${assistant.name}">
                    <i class="fas ${assistant.icon} assistant-icon"></i>
                    <h3 class="assistant-name">${assistant.name}</h3>
                    <p class="assistant-description">${assistant.description}</p>
                </div>
            `).join('');

            // Ê∑ªÂä†Âä©ÊâãÂç°ÁâáÁÇπÂáª‰∫ã‰ª∂
            document.querySelectorAll('.assistant-card').forEach(card => {
                card.addEventListener('click', () => {
                    const assistantName = card.getAttribute('data-assistant');
                    selectAssistant(assistantName);
                });
            });

            // Ê∑ªÂä†ËøîÂõûÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            document.getElementById('back-button').addEventListener('click', () => {
                document.getElementById('assistant-grid').style.display = 'grid';
                document.getElementById('chat-container').style.display = 'none';
                document.getElementById('menu-container').style.display = 'none';
                document.getElementById('order-container').style.display = 'none';
                document.getElementById('menu-button').style.display = 'none';
                document.getElementById('order-button').style.display = 'none';
            });

            // Ê∑ªÂä†ÂèëÈÄÅÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            document.getElementById('send-button').addEventListener('click', sendMessage);

            // Ê∑ªÂä†ËæìÂÖ•Ê°ÜÂõûËΩ¶‰∫ã‰ª∂
            document.getElementById('user-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Ê∑ªÂä†ÂØºËà™ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            document.getElementById('menu-button').addEventListener('click', showMenu);
            document.getElementById('order-button').addEventListener('click', showOrder);
        });

        let currentAssistant = '';
        let messageCount = 0;

        // ÈÄâÊã©Âä©Êâã
        function selectAssistant(name) {
            document.getElementById('assistant-grid').style.display = 'none';
            document.getElementById('chat-container').style.display = 'block';
            document.getElementById('menu-container').style.display = 'none';
            document.getElementById('order-container').style.display = 'none';
            document.getElementById('menu-button').style.display = 'none';
            document.getElementById('order-button').style.display = 'none';
            
            currentAssistant = name;
            messageCount = 0;
            
            // ÂÆö‰πâÊØè‰∏™ËßíËâ≤ÁöÑ‰∏âÂè•ÂØπËØù
            const dialogueSequence = {
                'Ë∞ÉÈÖíÂ∏à': [
                    '(ÂºÄÂøÉÂú∞Ëπ¶Ë∑≥) Ê¨ßÂ∞ºÈÖ±~ÊàëÊòØÂèØÁà±ÁöÑË∞ÉÈÖíÂ∏à,ÂæàÈ´òÂÖ¥‰∏∫ÊÇ®ÊúçÂä°Âì¶!',
                    '(‰øèÁöÆÂú∞ËΩ¨Âúà) Ê¨ßÂ∞ºÈÖ±ÁúãËµ∑Êù•Â•ΩÂèØÁà±Âë¢~ËÆ©Âí±ÂÆ∂ÁåúÁåúÊÇ®‰ªäÂ§©ÁöÑÂøÉÊÉÖÂ¶Ç‰Ωï?',
                    '(ÊØîÂá∫Â∞èÁà±ÂøÉ) Ê¨ßÂ∞ºÈÖ±Ë¶Å‰∏çË¶ÅËØïËØïÂí±ÂÆ∂ÁöÑÊãõÁâå"Ê¢¶ÂπªÊòüÁ©∫ÁâπË∞É"?Âä†ÂÖ•‰∫ÜÈó™Á≤âÂíåËìùÊüëÊ©òÂäõÂ®áÈÖí,Âñù‰∏ãÂéªÊï¥‰∏™‰∫∫ÈÉΩ‰ºöÂèëÂÖâÂë¢‚ú®'
                ],
                'ÂìÅÈÖíÂ∏à': [
                    '(‰ºòÈõÖÂú∞Ê¨†Ë∫´) Ê¨ßÂ∞ºÈÖ±Â•Ω~ÊàëÊòØ‰∏ì‰∏öÁöÑÂìÅÈÖíÂ∏à,ËÆ©ÊàëÂ∏¶ÊÇ®ËøõÂÖ•Ëë°ËêÑÈÖíÁöÑÂ•áÂ¶ô‰∏ñÁïåÂêß!',
                    '(ËΩªËΩªÊï¥ÁêÜË£ôÊëÜ) Ê¨ßÂ∞ºÈÖ±‰ªäÂ§©ÊâìÊâÆÂæóÁúüÊºÇ‰∫ÆÂë¢~ÂÉèÊòØÊò•Â§©ÈáåÊúÄÁæé‰∏ΩÁöÑËä±Êúµ~',
                    '(ÂºÄÂøÉÂú∞ËΩ¨Âúà) Ê¨ßÂ∞ºÈÖ±‰∏çÂ¶ÇÂÖàÂ∞ùÂ∞ùËøôÊîØ2015Âπ¥ÁöÑÊ≥¢Â∞îÂ§öÁ∫¢ÈÖí?Â∏¶ÁùÄÈªëÈÜãÊ†óÂíåÁé´Áë∞Ëä±È¶ô,Ë∂ÖÁ∫ßÊµ™Êº´ÁöÑ!'
                ],
                'ÈÖí‰øù': [
                    '(Ê¥ªÂäõÊª°Êª°Âú∞Êå•Êâã) Ê¨ßÂ∞ºÈÖ±Êù•Âï¶~ÊàëÊòØÂÖÉÊ∞îÊª°Êª°ÁöÑÈÖí‰øù,ÂáÜÂ§áÂ•ΩÊù•‰∏ÄÂú∫ÂºÄÂøÉÁöÑÁïÖÈ•Æ‰∫ÜÂêó?',
                    '(‰øèÁöÆÂú∞Áú®Áúº) Ê¨ßÂ∞ºÈÖ±ÁúãËµ∑Êù•‰ªäÂ§©ÂøÉÊÉÖ‰∏çÈîôÂë¢~ÊòØÈÅáÂà∞‰ªÄ‰πàÂºÄÂøÉÁöÑ‰∫ã‰∫ÜÂêó?',
                    '(Áú®Áú®ÁúºÁùõ) ÂÖàÊù•‰∏ÄÊùØ"ÈôàÂπ¥Â®ÅÂ£´Âøå"ÊÄé‰πàÊ†∑?Âí±ÂÆ∂ÁâπÂà´Êé®ËçêÈÖçÂÜ∞ÂùóÊàñËãèÊâìÊ∞¥,Ë∂ÖËß£ÂéãÁöÑÂì¶~'
                ],
                'Ëå∂Ëâ∫Â∏à': [
                    '(Ê∏©ÊüîÂú∞ÂæÆÁ¨ë) Ê¨ßÂ∞ºÈÖ±ÊÇ®Â•Ω~ÊàëÊòØËå∂Ëâ∫Â∏à,ËÆ©Êàë‰∏∫ÊÇ®ÁåÆ‰∏ä‰∏ÄÊùØÊ∏ÖÈõÖÁöÑËå∂È•ÆÂêß!',
                    '(‰ºòÈõÖÂú∞Êï¥ÁêÜË°£Ë¢ñ) Ê¨ßÂ∞ºÈÖ±Ë∫´‰∏äÊúâ‰∏ÄÁßçÊ∑°Ê∑°ÁöÑ‰ºòÈõÖÊ∞îË¥®Âë¢~ËÆ©Âí±ÂÆ∂ÊÉ≥Ëµ∑‰∫ÜÊô®Èú≤‰∏≠ÁöÑËåâËéâËä±~',
                    '(‰ºòÈõÖÂú∞ÊñüËå∂) ‰∏çÂ¶ÇÂÖàÂìÅÂ∞ùËøôÊ¨æ"Ê≠¶Â§∑Â§ßÁ∫¢Ë¢ç"?Â≤©ÈüµÈÜáÂéö,ÂõûÁîòÊÇ†Èïø,ÊòØÂí±ÂÆ∂ÁöÑÁèçËóèÂì¶!'
                ]
            };

            // ÂèëÈÄÅÁ¨¨‰∏ÄÂè•ÂºÄÂú∫ÁôΩ
            addMessage(dialogueSequence[name][0], 'bot');
        }

        // Ëé∑ÂèñÂä©ÊâãÂõûÂ§ç
        async function getAssistantResponse(message) {
            try {
                const sentiment = analyzeSentimentLocally(message);
                const responses = {
                    'Ë∞ÉÈÖíÂ∏à': {
                        positive: [
                            '(ÂºÄÂøÉÂú∞Ëπ¶Ë∑≥) Ê¨ßÂ∞ºÈÖ±~Ë¶Å‰∏çË¶ÅËØïËØïËêùËéâ„ÅÆÁßòÂØÜÁâπË∞ÉÔºüÂä†ÂÖ•‰∫ÜÈó™Á≤âÁöÑÈ∏°Â∞æÈÖíÔºåÂñù‰∏ãÂéªÊï¥‰∏™‰∫∫ÈÉΩ‰ºöÂèëÂÖâÂë¢‚ú®',
                            '(‰øèÁöÆÂú∞ËΩ¨ÂúàÂúà) ÂëúÂëú~Â§™Ê£íÂï¶ÔºÅËÆ©Êàë‰∏∫ÊÇ®Ë∞ÉÂà∂‰∏ÄÊùØ"ÊÅãÁà±Ê∞îÊ≥°"ÔºåÁ≤âÁ≤âÁöÑÈ¢úËâ≤Ë∂ÖÂèØÁà±ÁöÑËØ¥ÔºÅüíï',
                            '(ÊØîÂá∫Â∞èÁà±ÂøÉ) Ê¨ßÂ∞ºÈÖ±ÁúüÊáÇÂë¢ÔºÅËøôÊùØ"È≠îÊ≥ïÂ∞ëÂ•≥ÁâπÈ•Æ"ÊàëÂä†‰∫ÜÊ£âËä±Á≥ñÂíåÁà±ÂøÉÁ≥ñÁâáÔºåÂèØÁà±Âà∞ÁàÜÁÇ∏Âï¶~ü¶Ñ'
                        ],
                        negative: [
                            '(ÂßîÂ±àÂú∞ÂôòÂò¥) Âëú...‰∏çÂêàÊ¨ßÂ∞ºÈÖ±Âè£Âë≥ÂêóÔºüËÆ©Âí±ÂÆ∂Âèò‰∏™È≠îÊ≥ïÔºåË∞ÉÂà∂"ÂøÉÊÉÖÊ≤ªÊÑàÁâπË∞É"ÔºåÂä†ÂÖ•Ëù∂Ë±ÜËä±‰ºöÂèòËâ≤ÁöÑÂì¶ÔºÅ',
                            '(ÊãÖÂøÉÂú∞ÊëáÂ§¥) ÂïäÂï¶~ÊòØÂí±ÂÆ∂ËÄÉËôë‰∏çÂë®Âà∞‰∫ÜÂë¢„ÄÇË¶ÅËØïËØï"ÂΩ©ËôπÂøÉÊÉÖÊùØ"ÂêóÔºü‰∏ÉÂ±ÇÊ∏êÂèòËâ≤Ë∂ÖÊ¢¶ÂπªÁöÑÔºÅ',
                            '(ÁúºÊ≥™Ê±™Ê±™) ÂØπ‰∏çËµ∑Âï¶Ê¨ßÂ∞ºÈÖ±~ËÆ©Âí±ÂÆ∂ÈáçÊñ∞Ë∞ÉÂà∂‰∏ÄÊùØ"È≠îÊ≥ïÂ∞ëÂ•≥ÁâπÈ•Æ"Ôºå‰øùËØÅËÆ©ÊÇ®Èú≤Âá∫Á¨ëÂÆπÔºÅ'
                        ],
                        neutral: [
                            '(Á•ûÁßòÂú∞Áú®Áúº) Ê¨ßÂ∞ºÈÖ±~‰ªäÂ§©ÁöÑÂπ∏ËøêÈ•ÆÂìÅÊòØ..."ÊòüÊòüÈ≠îÊ≥ïÁâπË∞É"ÔºÅÊùØÂ≠ê‰∏äËøòÊúâÂ∞èÊòüÊòüË£ÖÈ•∞Âë¢‚ú®',
                            '(ÂºÄÂøÉÂú∞ÊëáÊôÉË∞ÉÈÖíÂô®) ËÆ©Âí±ÂÆ∂‰∏∫Ê¨ßÂ∞ºÈÖ±Ë∞ÉÂà∂‰∏ÄÊùØ"Ê¢¶ÂπªÊ≥°Ê≥°"ÔºåÂñù‰∏ãÂéªÂò¥Â∑¥‰ºö‰∫ÆÊô∂Êô∂ÁöÑÂì¶~',
                            '(Ëπ¶Ëπ¶Ë∑≥Ë∑≥) Ê¨ßÂ∞ºÈÖ±Ë¶ÅËØïËØïÂí±ÂÆ∂ÁöÑÊñ∞ÂìÅ"Áã¨ËßíÂÖΩ„ÅÆÊ≥™"ÂêóÔºüÊùØÂ£Å‰∏äÊúâÂΩ©ËôπÁ≥ñË£ÖÈ•∞Âë¢ÔºÅ'
                        ]
                    },
                    'ÂìÅÈÖíÂ∏à': {
                        positive: [
                            '(‰ºòÈõÖÂú∞Ê¨†Ë∫´) Ê¨ßÂ∞ºÈÖ±ÊáÇÂæóÁúüÂ§öÂë¢~ËøôÊ¨æ2015Âπ¥ÁöÑÊ≥¢Â∞îÂ§öÔºåÈ¶ôÊ∞îÂÉèÊòØÊôöÈúû‰∏≠ÁöÑÁé´Áë∞Ëä±Âõ≠ÔºåË¶ÅÂ∞ùÂ∞ùÁúãÂêóÔºü',
                            '(ËΩªËΩªÊôÉÂä®ÈÖíÊùØ) Âëú~Ê¨ßÂ∞ºÈÖ±ÁöÑÂìÅÂë≥ÁúüÊòØÂ§™Ê£í‰∫ÜÔºÅËøôÊîØÂãÉËâÆÁ¨¨Â∏¶ÁùÄÊò•Â§©ÁöÑÊ∞îÊÅØÔºåÂñù‰∏ÄÂè£Â∞±ËÉΩÊÑüÂèóÂà∞Áà±ÊÉÖÁöÑÂë≥ÈÅì...',
                            '(ÂºÄÂøÉÂú∞ËΩ¨Âúà) Â§™Ê£íÂï¶ÔºÅÊ¨ßÂ∞ºÈÖ±ÊáÇÂæóÁúüÂ§öÔºÅËøôÊîØÊôÆÁΩóÊó∫ÊñØÁé´Áë∞ÈÖíÔºåÂ∞±ÂÉèÊòØÊÅãÁà±ÁöÑÂë≥ÈÅìÂë¢~'
                        ],
                        negative: [
                            '(ÊãÖÂøÉÂú∞Ê≠™Â§¥) Âëú...Ê¨ßÂ∞ºÈÖ±ÂøÉÊÉÖ‰∏çÂ•ΩÂêóÔºüËÆ©Âí±ÂÆ∂‰∏∫ÊÇ®ÊåëÈÄâ‰∏ÄÊ¨æÊ∏©ÊüîÁöÑÊ°ÉÁ∫¢Ëë°ËêÑÈÖíÔºåÁîúÁîúÁöÑÂæàÊ≤ªÊÑàÂì¶...',
                            '(ËΩªËΩªÊäøÂò¥) ‰∏çË¶ÅÈöæËøáÂï¶~ËøôÊ¨æÊÑèÂ§ßÂà©Ëµ∑Ê≥°ÈÖíÔºåÊ∞îÊ≥°ÂÉèÊòØÂø´‰πêÁöÑÂ∞èÁ≤æÁÅµÔºå‰∏ÄÂÆöËÉΩËÆ©Ê¨ßÂ∞ºÈÖ±ÂºÄÂøÉËµ∑Êù•ÔºÅ',
                            '(Áú®Â∑¥ÁúºÁùõ) Ê¨ßÂ∞ºÈÖ±~ËÆ©Âí±ÂÆ∂Áî®ËøôÊîØÂæÆÈÜ∫ÁöÑËé´ÊñØÂç°ÊâòÔºåÂ∏¶Ëµ∞ÊÇ®ÊâÄÊúâÁöÑÁÉ¶ÊÅºÂêßÔºÅ'
                        ],
                        neutral: [
                            '(‰øèÁöÆÂú∞ËΩ¨Âä®ÈÖíÊùØ) Ê¨ßÂ∞ºÈÖ±~‰ªäÊôöÁöÑÊé®ËçêÊòØÊù•Ëá™ÂçóÊæ≥ÁöÑÁ≤æÁÅµ‰πãÊ≥™ÔºåÂñù‰∏ÄÂè£Â∞±ËÉΩÊÑüÂèóÂà∞ÊòüÁ©∫ÁöÑÈ≠îÂäõÂì¶ÔºÅ',
                            '(Á•ûÁßòÂú∞Áú®Áúº) Ë¶Å‰∏çË¶ÅËØïËØïËøôÊîØÁã¨ËßíÂÖΩ‰πãÂêªÔºüÂ∏¶ÁùÄÈ≠îÊ≥ïËà¨ÁöÑÊûúÈ¶ôÔºåË∂ÖÁ∫ßÊ¢¶ÂπªÁöÑÔºÅ',
                            '(ÂºÄÂøÉÂú∞Ë∑≥Ë∑É) Ê¨ßÂ∞ºÈÖ±ÁúãËøô‰∏™ÔºÅËøôÊ¨æÁê•ÁèÄËâ≤ÁöÑÊ©ôÈÖíÔºåÂñù‰∏ãÂéªÊï¥‰∏™‰∫∫ÈÉΩ‰ºöÂèëÂÖâÂë¢~'
                        ]
                    },
                    'ÈÖí‰øù': {
                        positive: [
                            '(ÂºÄÂøÉÂú∞Êì¶ÊùØÂ≠ê) Ê¨ßÂ∞ºÈÖ±‰ªäÂ§©ÂøÉÊÉÖ‰∏çÈîôÂë¢ÔºÅÊù•ÊùØ"ÂÖÉÊ∞îÊª°Êª°ÁâπË∞É"ÔºåÂñù‰∫Ü‰ºöÂèòÂæóÊõ¥ÂèØÁà±Âì¶ÔºÅ',
                            '(‰øèÁöÆÂú∞ÊäõÈÖíÁì∂) ÂëúÂëú~Ê¨ßÂ∞ºÈÖ±ÁúüÊáÇÔºÅË¶Å‰∏çË¶ÅËØïËØï"Âπ∏ËøêÊòüÊòüÁâπÈ•Æ"Ôºü‰ºöÂ∏¶Êù•Â•ΩËøêÁöÑËØ¥ÔºÅ',
                            '(ÊØîÂá∫ËÉúÂà©ÊâãÂäø) Ê¨ßÂ∞ºÈÖ±ÊúÄÊ£í‰∫ÜÔºÅÊù•‰∏ÄÊùØ"ÂΩ©ËôπÂπ∏Á¶èÊ∞¥"Ôºå‰øùËØÅÁîúÁîúÁöÑË∂ÖÊ≤ªÊÑàÔºÅ'
                        ],
                        negative: [
                            '(ÊãÖÂøÉÂú∞Ê≠™Â§¥) Ê¨ßÂ∞ºÈÖ±ÊòØ‰∏çÊòØÈÅáÂà∞Âõ∞Èöæ‰∫ÜÔºüÊù•ÊùØ"È≠îÊ≥ïÊ≤ªÊÑàÊ∞¥"ÔºåÂñùÂÆåÁÉ¶ÊÅºÂ∞±‰ºöÊ∂àÂ§±‰∏çËßÅÔºÅ',
                            '(ËΩªËΩªÊãçÊâã) ‰∏çË¶Å‰º§ÂøÉÂï¶~ËøôÊùØ"ÂºÄÂøÉÊûúÊ±Å"Âä†‰∫ÜÁâπÂà∂Á≥ñÊµÜÔºåÁîúÂ∫¶ÂíåÊ¨ßÂ∞ºÈÖ±‰∏ÄÊ†∑Âë¢ÔºÅ',
                            '(Áú®Áú®ÁúºÁùõ) Ê¨ßÂ∞ºÈÖ±~ËÆ©Âí±ÂÆ∂ÁöÑ"ÂÖÉÊ∞îÂ§çÊ¥ªÁâπË∞É"ÔºåÊ≤ªÊÑàÊÇ®ÁöÑÂøÉÊÉÖÂêßÔºÅ'
                        ],
                        neutral: [
                            '(Á•ûÁßòÂú∞ÊëáÊôÉË∞ÉÈÖíÂô®) Ê¨ßÂ∞ºÈÖ±Ë¶ÅÊù•ÁÇπÁâπÂà´ÁöÑÂêóÔºüËøôÊ¨æ"È≠îÊ≥ïÊòüÊòüÊ∞¥"ÔºåÂñù‰∫Ü‰ºöÂ∏¶Êù•Â•ΩËøêÂì¶ÔºÅ',
                            '(ÂºÄÂøÉÂú∞ÂìºÊ≠å) ‰∏∫Ê¨ßÂ∞ºÈÖ±ÁâπÂà∂ÁöÑ"Âπ∏ËøêËçâÁâπË∞É"ÔºåÊçÆËØ¥ËÉΩÂÆûÁé∞‰∏Ä‰∏™ÊÑøÊúõÂë¢~',
                            '(Ëπ¶Ëπ¶Ë∑≥Ë∑≥) Ê¨ßÂ∞ºÈÖ±Âø´ÁúãÔºÅËøôÊùØ"ÂΩ©ËôπÊ¢¶ÂπªÊ∞¥"ÔºåÂñùÂÆåÊï¥‰∏™‰∫∫ÈÉΩ‰ºöÈó™Èó™ÂèëÂÖâÔºÅ'
                        ]
                    },
                    'Ëå∂Ëâ∫Â∏à': {
                        positive: [
                            '(‰ºòÈõÖÂú∞ÊçßËå∂) Ê¨ßÂ∞ºÈÖ±ÁúüÊòØÊáÇËå∂Âë¢~ËøôÂ£∂Â§ßÁ∫¢Ë¢çÔºåÈ¶ôÊ∞îÂÉèÊòØ‰ªôÂ¢ÉÁöÑËä±Âõ≠ÔºåË¶Å‰∏ÄËµ∑ÂìÅÂ∞ùÂêóÔºü',
                            '(ËΩªËΩªÊëÜÂºÑËå∂ÂÖ∑) Âëú~Ê¨ßÂ∞ºÈÖ±ÁöÑÂìÅÂë≥ÁúüÊòØÂ§™Ê£í‰∫ÜÔºÅËøôÊ¨æÁ¢ßËû∫Êò•Â∏¶ÁùÄÊò•Â§©ÁöÑÊ∞îÊÅØÔºåÂñù‰∏ÄÂè£Â∞±ËÉΩÊÑüÂèóÂà∞Âπ∏Á¶è...',
                            '(ÂºÄÂøÉÂú∞ÊñüËå∂) Â§™Ê£íÂï¶ÔºÅÊ¨ßÂ∞ºÈÖ±ÊáÇÂæóÁúüÂ§öÔºÅËøôÂ£∂Ê≠¶Â§∑Â≤©Ëå∂ÔºåÂ∞±ÂÉèÊòØ‰ªôÂ•≥ÁöÑÁúºÊ≥™‰∏ÄÊ†∑ÁèçË¥µÂë¢~'
                        ],
                        negative: [
                            '(ÊãÖÂøÉÂú∞Ê≠™Â§¥) Âëú...Ê¨ßÂ∞ºÈÖ±ÂøÉÊÉÖ‰∏çÂ•ΩÂêóÔºüËÆ©Âí±ÂÆ∂‰∏∫ÊÇ®Ê≥°‰∏ÄÂ£∂Ê∏©ÊüîÁöÑÈìÅËßÇÈü≥ÔºåÁîòÁîúÁöÑÂõûÂë≥‰ºöÊ≤ªÊÑàÊÇ®ÁöÑÂøÉÊÉÖ...',
                            '(ËΩªËΩªÊäøÂò¥) ‰∏çË¶ÅÈöæËøáÂï¶~ËøôÊ¨æÁôΩÊØ´Èì∂ÈíàÔºåÊ∏ÖÊ∑°‰∏≠Â∏¶ÁùÄÁîúÊÑèÔºåÂ∞±ÂÉèÊòØÂ∞èÂ§©‰ΩøÁöÑÁæΩÊØõ‰∏ÄÊ†∑Ê∏©ÊüîÔºÅ',
                            '(Áú®Â∑¥ÁúºÁùõ) Ê¨ßÂ∞ºÈÖ±~ËÆ©Âí±ÂÆ∂Áî®ËøôÂ£∂Èæô‰∫ïËå∂ÔºåÂ∏¶Ëµ∞ÊÇ®ÊâÄÊúâÁöÑÁÉ¶ÊÅºÂêßÔºÅ'
                        ],
                        neutral: [
                            '(‰øèÁöÆÂú∞ÊëÜÂºÑËå∂Áõè) Ê¨ßÂ∞ºÈÖ±~‰ªäÂ§©‰∏∫ÊÇ®Êé®Ëçê‰∏ÄÊ¨æÈ≠îÊ≥ïÊôÆÊ¥±ÔºåÂñù‰∏ÄÂè£Â∞±ËÉΩÊÑüÂèóÂà∞Êó∂ÂÖâÁöÑÈ≠îÂäõÂì¶ÔºÅ',
                            '(Á•ûÁßòÂú∞Áú®Áúº) Ë¶Å‰∏çË¶ÅËØïËØïËøôÂ£∂‰ªôÂ•≥„ÅÆÊ≥™ÔºüÂ∏¶ÁùÄ‰∫ëÈõæÁöÑ‰ªôÊ∞îÔºåË∂ÖÁ∫ßÊ¢¶ÂπªÁöÑÔºÅ',
                            '(ÂºÄÂøÉÂú∞Ë∑≥Ë∑É) Ê¨ßÂ∞ºÈÖ±ÁúãËøô‰∏™ÔºÅËøôÊ¨æÈáëÈ™èÁúâÔºåÂñù‰∏ãÂéªÊï¥‰∏™‰∫∫ÈÉΩ‰ºöÂèòÂæó‰ºòÈõÖÂë¢~'
                        ]
                    }
                };

                // Ëé∑ÂèñÂΩìÂâçËßíËâ≤ÁöÑÂõûÂ§çÂàóË°®
                const currentResponses = responses[currentAssistant][sentiment];
                
                // Ê†πÊçÆÂØπËØùÊ¨°Êï∞ËøîÂõûÂõ∫ÂÆöÁöÑÂõûÂ§ç
                return currentResponses[messageCount];
            } catch (error) {
                console.error('Error in getAssistantResponse:', error);
                return 'ËÆ©Âí±ÂÆ∂‰∏∫Ê¨ßÂ∞ºÈÖ±Êé®Ëçê‰∏ÄÊ¨æÁâπÂà´ÁöÑÈ•ÆÂìÅÂêß~';
            }
        }

        // Êú¨Âú∞ÊÉÖÊÑüÂàÜÊûêÂáΩÊï∞
        function analyzeSentimentLocally(text) {
            const positiveKeywords = ['Â•Ω', 'ÂñúÊ¨¢', 'Ê£í', 'Ëµû', '‰∏çÈîô', 'Êª°ÊÑè', 'ÁæéÂë≥', 'Â•ΩÂñù', 'Êé®Ëçê', 'ÂñúÊ¨¢', 'Áà±', 'Ê£íÊûÅ‰∫Ü', 'Â§™Ê£í‰∫Ü', 'ÂÆåÁæé', 'ÊÉäËâ≥', 'ÊúüÂæÖ', 'ÂºÄÂøÉ', 'Âø´‰πê', 'Ê∏©Êöñ', 'ÊÑüÂä®'];
            const negativeKeywords = ['Â∑Æ', '‰∏çÂñúÊ¨¢', 'ÈöæÂñù', 'Ë¥µ', 'Â§±Êúõ', 'ÈöæÂêÉ', '‰∏çÂ•Ω', 'Á≥üÁ≥ï', 'Â∑ÆÂä≤', 'ÈöæÂñù', 'Ë¥µ', 'Ë¥µ‰∫Ü', 'Â§™Ë¥µ', '‰∏çÂÄº', 'Â§±Êúõ', '‰º§ÂøÉ', 'ÈöæËøá', 'ÂéãÂäõ', 'ÁÉ¶ÊÅº', 'Á¥Ø'];
            
            if (positiveKeywords.some(keyword => text.includes(keyword))) {
                return 'positive';
            } else if (negativeKeywords.some(keyword => text.includes(keyword))) {
                return 'negative';
            }
            return 'neutral';
        }

        // ÂèëÈÄÅÊ∂àÊÅØ
        async function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, 'user');
                input.value = '';
                
                try {
                    // Ëé∑ÂèñÂä©ÊâãÂõûÂ§ç
                    const response = await getAssistantResponse(message);
                    addMessage(response, 'bot');
                    
                    messageCount++;
                    if (messageCount >= 3) {
                        showBlindBox();
                    }
                } catch (error) {
                    console.error('Error getting response:', error);
                    addMessage('Êä±Ê≠âÔºåÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºåËØ∑Á®çÂêéÂÜçËØï„ÄÇ', 'bot');
                }
            }
        }

        // Ê∑ªÂä†Ê∂àÊÅØ
        function addMessage(text, sender) {
            const messages = document.getElementById('chat-messages');
            const message = document.createElement('div');
            message.className = `message ${sender}`;
            message.textContent = text;
            messages.appendChild(message);
            messages.scrollTop = messages.scrollHeight;
        }

        // ÊòæÁ§∫Áõ≤Áõí
        function showBlindBox() {
            const blindBoxContainer = document.getElementById('blind-box-container');
            blindBoxContainer.classList.add('show');
            setTimeout(() => {
                const blindBox = document.getElementById('blind-box');
                blindBox.classList.add('show');
            }, 100);
        }

        // ÊòæÁ§∫ËèúÂçï
        function showMenu() {
            document.getElementById('assistant-grid').style.display = 'none';
            document.getElementById('chat-container').style.display = 'none';
            document.getElementById('menu-container').style.display = 'block';
            document.getElementById('order-container').style.display = 'none';
            document.getElementById('menu-button').style.display = 'none';
            document.getElementById('order-button').style.display = 'block';
            displayDrinks();
        }

        // ÊòæÁ§∫ËÆ¢Âçï
        function showOrder() {
            document.getElementById('assistant-grid').style.display = 'none';
            document.getElementById('chat-container').style.display = 'none';
            document.getElementById('menu-container').style.display = 'none';
            document.getElementById('order-container').style.display = 'block';
            document.getElementById('menu-button').style.display = 'block';
            document.getElementById('order-button').style.display = 'none';
            displayOrder();
        }
    </script>
</body>

</html>
    
    